<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.zebone.dip.mdorg.dao.MasterDataFieldStruMapper" >
  <resultMap id="MasterDataFieldMap" type="com.zebone.dip.md.vo.MasterDataField" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 01 16:41:00 CST 2013.
    -->
    <id column="ID_" property="id" jdbcType="VARCHAR" />
    <result column="FIELD_NAME" property="fieldName" jdbcType="VARCHAR" />
    <result column="DISPLAY_NAME" property="displayName" jdbcType="VARCHAR" />
    <result column="FIELD_TYPE" property="fieldType" jdbcType="VARCHAR" />
    <result column="COMMENT" property="comment" jdbcType="VARCHAR" />
    <result column="FIELD_LENGTH" property="fieldLength" jdbcType="VARCHAR" />
    <result column="TYPE_CODE" property="typeCode" jdbcType="VARCHAR" />
    <result column="NULLABLE" property="nullable" jdbcType="VARCHAR" />
    <result column="SORT_NO" property="sortNo" jdbcType="DECIMAL" />
    <result column="MASTER_DATA_ID" property="masterDataId" jdbcType="VARCHAR" />
    <result column="DISPLAYABLE" property="displayable" jdbcType="VARCHAR" />
    <result column="CHECK_RULE" property="checkRule" jdbcType="VARCHAR" />
  </resultMap>
  <sql id="MasterDataFieldList" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 01 16:41:00 CST 2013.
    -->
    ID_, FIELD_NAME, DISPLAY_NAME, FIELD_TYPE,"COMMENT", FIELD_LENGTH, TYPE_CODE, NULLABLE,
    SORT_NO, MASTER_DATA_ID, DISPLAYABLE, CHECK_RULE
  </sql>
  
  <select id="masterDataFieldList" parameterType="com.zebone.dip.md.vo.MasterDataField" resultMap="MasterDataFieldMap">
        select
        <include refid="MasterDataFieldList"/>
        from P_MASTER_DATA_FIELD 
        where MASTER_DATA_ID = #{masterDataId,jdbcType=VARCHAR}
        order by sort_no NULLS FIRST ,FIELD_NAME
    </select>
  	
  	 <select id="masterDataFieldTotalCount" resultType="int" parameterType="com.zebone.dip.md.vo.MasterDataField">
        select count(ID_)
        from P_MASTER_DATA_FIELD 
        where MASTER_DATA_ID = #{masterDataId,jdbcType=VARCHAR}
    </select>
    
    <select id="selectByPrimaryKey" resultMap="MasterDataFieldMap" parameterType="java.lang.String" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jun 25 14:45:52 CST 2013.
    -->
    select 
    <include refid="MasterDataFieldList" />
    from P_MASTER_DATA_FIELD
    where ID_ = #{id,jdbcType=VARCHAR}
  </select>
  
  <select id="fieldNameCount" parameterType="com.zebone.dip.md.vo.MasterDataField" resultType="int">
        select count(ID_)
        from P_MASTER_DATA_FIELD
        <where>
       		1=1
            AND FIELD_NAME = #{fieldName} AND MASTER_DATA_ID = #{masterDataId} AND ID_ <![CDATA[<>]]> #{id}
        </where>
    </select>



	<insert id="saveMasterDataStruFieldInfo" parameterType="com.zebone.dip.md.vo.MasterDataField" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jun 25 14:45:52 CST 2013.
    -->
    insert into P_MASTER_DATA_FIELD (ID_, FIELD_NAME, DISPLAY_NAME, 
      FIELD_TYPE, "COMMENT", FIELD_LENGTH, 
      TYPE_CODE, NULLABLE, SORT_NO, 
      MASTER_DATA_ID, DISPLAYABLE,CHECK_RULE)
    values (#{id,jdbcType=VARCHAR}, #{fieldName,jdbcType=VARCHAR}, #{displayName,jdbcType=VARCHAR}, 
      #{fieldType,jdbcType=VARCHAR}, #{comment,jdbcType=VARCHAR}, #{fieldLength,jdbcType=DECIMAL}, 
      #{typeCode,jdbcType=VARCHAR}, #{nullable,jdbcType=VARCHAR}, #{sortNo,jdbcType=VARCHAR}, 
      #{masterDataId,jdbcType=VARCHAR}, #{displayable,jdbcType=VARCHAR}, #{checkRule,jdbcType=VARCHAR})
  	</insert>

	<update id="updateMasterDataStruFieldInfo" parameterType="com.zebone.dip.md.vo.MasterDataField" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jun 25 14:45:52 CST 2013.
    -->
    update P_MASTER_DATA_FIELD
    set FIELD_NAME = #{fieldName,jdbcType=VARCHAR},
      DISPLAY_NAME = #{displayName,jdbcType=VARCHAR},
      FIELD_TYPE = #{fieldType,jdbcType=VARCHAR},
      "COMMENT" = #{comment,jdbcType=VARCHAR},
      FIELD_LENGTH = #{fieldLength,jdbcType=DECIMAL},
      TYPE_CODE = #{typeCode,jdbcType=VARCHAR},
      NULLABLE = #{nullable,jdbcType=VARCHAR},
      SORT_NO = #{sortNo,jdbcType=VARCHAR},
      MASTER_DATA_ID = #{masterDataId,jdbcType=VARCHAR},
      DISPLAYABLE = #{displayable,jdbcType=VARCHAR},
      CHECK_RULE = #{checkRule,jdbcType=VARCHAR}
    where ID_ = #{id,jdbcType=VARCHAR}
 	</update>

  	<delete id="deleteMasterDataStruFieldByIds">
        delete from P_MASTER_DATA_FIELD where
        <foreach collection="list" item="item" index="index" separator="OR">
            (ID_ = #{item,jdbcType=VARCHAR})
        </foreach>
  </delete>

    <select id="getMDFieldLic" parameterType="java.lang.String" resultMap="MasterDataFieldMap">
        select
        <include refid="MasterDataFieldList"/>
        from P_MASTER_DATA_FIELD
        where MASTER_DATA_ID = #{masterDataId,jdbcType=VARCHAR}
    </select>

    <delete id="deleteMDFieldByMDIds">
        delete from P_MASTER_DATA_FIELD where
        <foreach collection="list" item="item" index="index" separator="OR">
            (MASTER_DATA_ID = #{item,jdbcType=VARCHAR})
        </foreach>
    </delete>

</mapper>